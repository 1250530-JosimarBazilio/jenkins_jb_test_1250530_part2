apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: lms-books

resources:
  - namespace.yaml
  - configmap.yaml
  - secrets.yaml
  # Shared services
  - rabbitmq-deployment.yaml
  # Shared PostgreSQL database (single database per microservice)
  - postgres-pvc.yaml
  - postgres-deployment.yaml
  # LMS Books Deployment (all instances share the same database)
  - lms-books-deployment.yaml
  # Horizontal Pod Autoscaler for load adaptation
  - lms-books-hpa.yaml
  # - lms-books-keda.yaml         # Advanced autoscaling with KEDA (requires KEDA installed)
  # - lms-books-statefulset.yaml  # Database-per-instance (disabled)
  # - ingress.yaml                # Uncomment if you have an Ingress Controller

commonLabels:
  project: lms-books
  managed-by: kustomize
  architecture: shared-database
